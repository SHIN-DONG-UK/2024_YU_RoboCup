# π§² DC λ¨ν„°
## 1. PWM : λ””μ§€ν„Έ μ‹ νΈλ΅ 'κ°€μ§' μ•„λ‚ λ΅κ·Έ λ§λ“¤κΈ°
> **PWM**
> λ””μ§€ν„Έ νν•μ ON μ‹κ°„ λΉ„μ¨(Duty)μ„ μ΅°μ ν•΄ *ν‰κ·  μ „μ••*μ„ λ°”κΎΈλ” κΈ°λ²•μ…λ‹λ‹¤.

### 1-1. μ λ¬λ²•κ³Όμ μ μ‚¬μ„±
- **μ λ¬λ²•** : μ μ„ μ°μ–΄μ„ κ·Έλ¦Όμ„ κ·Έλ¦¬λ” λ°©λ²•(0 or 1μ λ””μ§€ν„Έκ³Ό μ μ‚¬)

- μΌμ •ν• λ©΄μ  μ•μ μ μ κ°μλ΅ μ•„λ‚ λ΅κ·Έ κ°’μΈ λ…μ•”μ΄ κ²°μ •λ¨
    
    <img width="50%" alt="α„‰α…³α„α…³α„…α…µα†«α„‰α…£α†Ί 2024-10-19 α„‹α…©α„’α…® 11 25 51" src="https://github.com/user-attachments/assets/473c1513-58f2-4afd-b877-29bc3dbb2d36">

### 1-2. PWM(ν„μ¤ ν­ λ³€μ΅°)
- PWM μ‹ νΈλ” μΌμ • μ£ΌκΈ° λ‚΄μ—μ„ Onμ΄ λλ” μ‹κ°„μ λΉ„μ¨μ„ μ΅°μ ν•¨
    
    <img width="50%" alt="α„‰α…³α„α…³α„…α…µα†«α„‰α…£α†Ί 2024-10-19 α„‹α…©α„’α…® 11 29 03" src="https://github.com/user-attachments/assets/1e1c76bf-cb1f-49bb-9ed2-55d8d14fc26f">
    
    - **Duty Ratio** : PWM μ‹ νΈμ On λ¶€λ¶„μ λΉ„μ¨

    - DutyλΉ„κ°€ *λ†’μ„μλ΅* λ†’μ€ μ „μ••μ΄ κ°€ν•΄μ§€λ” κ²ƒκ³Ό λ™μΌ

    - DutyλΉ„κ°€ *λ‚®μ„μλ΅* λ‚®μ€ μ „μ••μ΄ κ°€ν•΄μ§€λ” κ²ƒκ³Ό λ™μΌ
    
## 2. Interrupt : CPU κ°€λ΅μ±„κΈ°

> **Inturrupt** μ–΄λ–¤ μ‘μ—…μ„ μ§„ν–‰ν•κ³  μλ‹¤κ°€ μ²λ¦¬ν•΄μ•Ό ν•  μΌμ΄ λ°μƒν•μ—¬ κ·Έ μΌμ„ λ¨Όμ € μ²λ¦¬ν•λ” *ν•λ“μ›¨μ–΄μ * μ΄λ²¤νΈ μ²λ¦¬ λ©”μ»¤λ‹μ¦μ…λ‹λ‹¤.

### 2-1. μΈν„°λ½νΈμ™€ μΈν„°λ½νΈ μ„λΉ„μ¤ λ£¨ν‹΄

- μΈν„°λ½νΈκ°€ λ°μƒν•λ©΄ ν”„λ΅μ„Έμ„λ” ν„μ¬ μν–‰μ¤‘μΈ ν”„λ΅κ·Έλ¨μ„ λ©μ¶”κ³  μƒνƒ λ μ§€μ¤ν„°μ™€ `PC(Program Counter)` λ“±μ„ μ¤νƒμ— μ μ‹ μ €μ¥ν• ν›„ μΈν„°λ½νΈ μ„λΉ„μ¤ λ£¨ν‹΄μΌλ΅ μ ν”„ν•¨

- `μΈν„°λ½νΈ μ„λΉ„μ¤ λ£¨ν‹΄(ISR)`μ„ μ‹¤ν–‰ν• ν›„μ—λ” μ΄μ „μ ν”„λ΅κ·Έλ¨μΌλ΅ λ³µκ·€ν•μ—¬ μ •μƒμ μΈ μ μ°¨λ¥Ό μ‹¤ν–‰

<p align="center"><img src="https://github.com/user-attachments/assets/03e0cdff-0336-44ea-980c-90a2b88eb2c6" width=50%></p>


### 2-2. Interrupt vs Polling

- `ν΄λ§(polling) λ°©μ‹` : ν•λ“μ›¨μ–΄μ μΌλ΅ CPUμ—κ² μ•λ¦¬λ” λ°©λ²•μ΄ μ—†μ΄ CPUκ°€ κ³„μ† ν•΄λ‹Ή ν•λ“μ›¨μ–΄λ¥Ό κ°μ‹ν•μ—¬ μ²λ¦¬ν•λ” λ°©μ‹
    
    ```
    while(1)
    {
    	if(λ©”μΌμ΄ μ™”λ‚?)
    		ν™•μΈ;
    	delay(20);
    }
    ```
    
    - λ³µμ΅ν• μΈν„°λ½νΈλ¥Ό μ‚¬μ©ν•μ§€ μ•μ•„ ν”„λ΅κ·Έλ¨μ΄ λ‹¨μ

    - μ‹¤μ‹κ°„ μ²λ¦¬μ—μ„ λ¬Έμ κ°€ λ  μ μμ

    - μ •ν™•ν• νƒ€μ΄λ°μ— μ‘μ—…μ„ μ²λ¦¬ν•μ§€ λ»ν•¨

    - ν”„λ΅μ„Έμ„μ μ„±λ¥ λ‚­λΉ„

- `μΈν„°λ½νΈ(Interrupt) λ°©μ‹` : ν•λ“μ›¨μ–΄μ—μ„ μ „μμ μΈ νλ¦„μ„ ν†µν•΄ CPUμ—κ² μ•λ ¤ ν„μ¬ μ§„ν–‰ μ¤‘μΈ ν”„λ΅κ·Έλ¨μ„ μ¤‘μ§€ν•κ³  μΈν„°λ½νΈ μ„λΉ„μ¤ λ£¨ν‹΄μ„ μ‹¤ν–‰

### 2-3. Interrupt μ°μ„ μμ„

- λ™μ‹μ— μ—¬λ¬ κ°μ μΈν„°λ½νΈκ°€ λ°μƒν• κ²½μ°, ν”„λ΅μ„Έμ„κ°€ νΌλ€μ— λΉ μ§ μ μμ

- μ΄λ¬ν• λ¬Έμ λ¥Ό ν”Όν•κΈ° μ„ν•΄, μΈν„°λ½νΈλ“¤μ€ *μ°μ„ μμ„*κ°€ μμΌλ©°, μ—¬λ¬ κ°μ μΈν„°λ½νΈ λ°μƒ μ‹μ—λ” μ°μ„ μμ„μ— λ”°λΌ μ„λΉ„μ¤ λ£¨ν‹΄μ„ μ‹¤ν–‰ν•¨

- λ€λ¶€λ¶„μ λ§μ΄ν¬λ΅ ν”„λ΅μ„Έμ„μ μµμƒμ„ μ°μ„ μμ„ μΈν„°λ½νΈλ” Restμ…λ ¥μ„

### 2-4. νƒ€μ΄λ¨Έ Interrupt

- ν”„λ΅κ·Έλ¨ μ‘μ„± μ‹, νΉμ •ν• μ‹κ°„λ§λ‹¤ μ •ν™•ν•κ² μ–΄λ–¤ μ‘μ—…μ„ μ‹¤ν–‰ν•΄μ•Ό ν•  λ•κ°€ μμ

- Timer μΈν„°λ½νΈλ” μ •ν•΄μ§„ μ‹κ°„λ§λ‹¤ λ‹¤λ¥Έ λ™μ‘μ„ μ¤‘μ§€ν•κ³  μΈν„°λ½νΈ ν•¨μλ΅ κ·μ •λ λ¶€λ¶„μ„ μ‹¤ν–‰

- μμ‹

    ```cpp
    #include "RPI_Pico_TimerInterrupt.h"

    bool TimerHandler0(struct repeating_timer *t)
    {
        // μ‘μ—… λ‚΄μ©
        return true;
    }

    RPI_PICO_Timer ITimer0(0);

    void setup()
    {
        pinMode(0, OUTPUT);
        ITimer0.attachInterruptInterval(100 * 1000, TimerHandler0);
        // us λ‹¨μ„λ΅ TimerHandler0λ¥Ό μ‹¤ν–‰
    }

    void loop()
    {
    }
    ```

### 2-5. μ™Έλ¶€ Interrupt

- μ™Έλ¶€ λ””μ§€ν„Έ ν•€μ μ…λ ¥μ— λ”°λΌμ„ μΈν„°λ½νΈλ¥Ό μ‹¤ν–‰
- μΈν„°λ½νΈ λ°μƒ μ΅°κ±΄
    
    | Mode μΆ…λ¥ | μ„¤λ… |
    | --- | --- |
    | LOW | μ„¤μ • ν•€μ΄ Low(0V) μƒνƒμΌ λ• μΈν„°λ½νΈ λ°μƒ |
    | RISING | μ„¤μ • ν•€μ΄ Lowμ—μ„ Highλ΅ λ³€ν™”ν•  λ• μΈν„°λ½νΈ λ°μƒ |
    | FALLING | μ„¤μ • ν•€μ΄ Highμ—μ„ Lowλ΅ λ³€ν™”ν•  λ• μΈν„°λ½νΈ λ°μƒ |
    | CHANGE | μ„¤μ • ν•€μ Low-High μƒνƒκ°€ λ°”λ€” λ• μΈν„°λ½νΈ λ°μƒ |

## 3. μ—”μ½”λ”
>**Encoder**
> νμ „ μ›€μ§μ„μ„ 0 / 1μ ν„μ¤(λ””μ§€ν„Έ μ‹ νΈ)λ΅ λ°”κΏ” μ£Όλ” μ„Όμ„λ΅, λ¨ν„° μ μ–΄μ 'λ' μ—­ν• μ„ ν•©λ‹λ‹¤.

<p align="center"><img width="50%" alt="α„‰α…³α„α…³α„…α…µα†«α„‰α…£α†Ί 2024-10-20 α„‹α…©α„α…¥α†« 12 06 52" src="https://github.com/user-attachments/assets/834c78b7-85d1-4ac4-8d10-70b41bd586a7"></p>

- **κ΄‘ν•™μ‹ κµ¬μ΅°**
    1. **μ¬λ¦Ώ λ””μ¤ν¬** : μΌμ • κ°„κ²©μΌλ΅ κµ¬λ©μ΄ λ«λ¦° μ›ν
    2. **LED -> ν¬ν† μ„Όμ„** : λ””μ¤ν¬ μ–‘μ½μ— λ°°μΉ, κµ¬λ© ν†µκ³Ό μ—¬λ¶€λ΅ λΉ› ON/OFF
    3. **μ¶λ ¥** : νμ „ -> ν„μ¤μ—΄ μƒμ„± -> μ†λ„Β·λ°©ν–¥Β·μ„μΉ κ³„μ‚°

---

### 3-1. `μ†λ„` μΈ΅μ • 2κ°€μ§€ λ°©λ²•

<p align="center">
  <img width="45%" alt="Mβ€‘method" src="https://github.com/user-attachments/assets/1336cb01-e048-4801-a5e1-3472ca7253c0">
  <img width="45%" alt="Tβ€‘method" src="https://github.com/user-attachments/assets/5c444997-f432-4f49-90ea-f075d815c0bf">
</p>

| λ°©λ²• | μ›λ¦¬ | μ¥μ  | λ‹¨μ  | κ¶μ¥ μμ—­ |
| :-- | :-- | :-- | :-- | :-- |
| **Mβ€‘Method (μ£ΌκΈ°β€‘μΉ΄μ΄ν…)** | Ξ”tΒ (κ³ μ • μ‹κ°„) λ™μ• ν„μ¤ κ°μ N μ„ΈκΈ° | μ—°μ‚° κ°„λ‹¨, κ³ μ† μ •ν™• | μ €μ†μΌ λ• Nμ΄ μ‘μ•„ μ¤μ°¨ β†‘ | **μ¤‘Β·κ³ μ†** |
| **Tβ€‘Method (ν„μ¤β€‘νƒ€μ΄λ°)** | ν• ν„μ¤ κΈ°κ°„Β Tλ¥Ό λ‚΄λ¶€ κ³ μ† ν΄λ­μΌλ΅ λ¶„ν•΄ | μ €μ† μ •ν™•, λ¶„ν•΄λ¥ μμ λ„ | κ³ μ†μΌ λ• Tκ°€ μ§§μ•„ ν΄λ­ λ¶€μ΅±Β·μ¤μ°¨ β†‘ | **μ €μ†** |


### 3-2. νμ „ `λ°©ν–¥` κ²€μ¶ : μΏΌλ“λ¬μ²(Quadrature) μ‹ νΈ
μ—”μ½”λ”λ” **Aμƒ**, **Bμƒ** 2μ±„λ„μ„ 90Β° μ„μƒ μ°¨λ΅ μ¶λ ¥ν•©λ‹λ‹¤.

<p align = "center"><img width="50%" alt="α„‰α…³α„α…³α„…α…µα†«α„‰α…£α†Ί 2024-10-20 α„‹α…©α„α…¥α†« 12 56 29" src="https://github.com/user-attachments/assets/1c22c9c0-f75e-4737-9528-f68714b2e454"></p>

| νΈλ¦¬κ±° | μ΅°κ±΄ | `A β• B`κ°€ **κ°™μ** | `A β• B`κ°€ **λ‹¤λ¦„** |
| :--- | :--- | :---: | :---: |
| **Aμƒ λ³€ν™”(RISING/FALLING)** | μΈν„°λ½νΈ λ°μƒ μκ°„ | μ •νμ „Β (+) | μ—­νμ „Β (β’) |
| **Bμƒ λ³€ν™”** | γ€ƒ | μ—­νμ „Β (β’) | μ •νμ „Β (+) |
